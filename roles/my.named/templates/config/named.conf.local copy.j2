# {{ ansible_managed }}

{% if my_named_mode == 'master' %}

{% for zone in my_named_zones %}
zone "{{ zone }}" {
  type master;
  file "{{ my_named_base_dir }}/db.{{ zone }}";
  allow-transfer { transfers-allowed-by; };
  allow-query { any; };
  notify yes;
};
{% endfor %}

{% else %}

{% for zone in my_named_zones %}
zone "{{ zone }}" {
  type slave;
  file "{{ my_named_base_dir }}/db.{{ zone }}";
  allow-query { any; };
  masters { {{ my_named_master_ip }}; };
};
{% endfor %}

{% endif %}